<!DOCTYPE html>
<html lang="pt-br">
<head>
  <meta charset="UTF-8">
  <title>Ambiente de Rede com Ubuntu Server (ADDC) | Ivaldo Fernandes</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="theme-color" content="#FFA500">
  
    <meta property="og:image" content="/app/imagens/512x512.png">
    <link rel="icon" href="/app/imagens/512x512.png" type="image/x-icon">
  
  <link rel="manifest" href="/app/manifest.json">
<meta name="theme-color" content="#000000">

  <!-- Structured Data -->
  <script type="application/ld+json">
    {
      "@context": "https://schema.org",
      "@type": "NewsArticle",
      "headline": "Ambiente de Rede com Ubuntu Server (ADDC) | Ivaldo Fernandes",
      "image": [
        "/app/imagens/512x512.png"
       ],
      "datePublished": "2025-06-30T16:09:00-03:00",
      "dateModified": "2025-06-30T16:09:00-03:00",
      "author": [{
          "@type": "Person",
          "name": "Ivaldo Fernandes",
          "url": "https://ivaldofs.com.br/"
      }]
    }
    </script>

  <!-- Google tag (gtag.js) -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-947PJ1CXF0"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-947PJ1CXF0');
</script>

  <link rel="stylesheet" href="/app/styles.css">


</head>
<body>

<b><center>
<a href="https://ivaldofs.com.br/">Inicio</a> |
<a href="https://ivaldofs.com.br/contato.html">Contato</a> |
<a href="https://ivaldofs.com.br/sobre.html">Sobre</a> |
<a href="https://ivaldofs.com.br/politica-de-privacidade.html">Politica de Privacidade</a> |
<a href="https://ivaldofs.com.br/termos-de-uso.html">Termos de Uso</a> |
<a href="/biblia/outros-idiomas.html">Outros Idiomas</a> |
<a href="/biblia/estudos.html">Estudos</a> 
</center><b>
   
  <br><center>
  <form action="https://www.google.com/search" method="get" class="search-form">
    <input type="text" name="q" placeholder="Pesquise aqui..." required>
    <input type="hidden" name="sitesearch" value="ivaldofs.com.br"> <!-- Define o site a ser pesquisado -->
    <button type="submit">Buscar</button>
</form>
</center><br>
 <div class="blogger-box">
<h1>Ambiente de Rede com Ubuntu Server (ADDC) | Ivaldo Fernandes</h1>

   
    <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-4610790883957362"
     crossorigin="anonymous"></script>
<!-- ivaldofs_starter-pro-main-after-ad_AdSense2_1x1_as -->
<ins class="adsbygoogle"
     style="display:block"
     data-ad-client="ca-pub-4610790883957362"
     data-ad-slot="5122445068"
     data-ad-format="auto"
     data-full-width-responsive="true"></ins>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script>
   
 <p><span style="font-size: medium;">Ambiente de Rede com Ubuntu Server (ADDC)</span></p>
<h2><span style="font-size: medium;">🖥️ 1. Máquinas Utilizadas</span></h2>
<table>
<thead>
<tr>
<th><span style="font-size: medium;">Função</span></th>
<th><span style="font-size: medium;">Sistema</span></th>
<th><span style="font-size: medium;">IP Estático</span></th>
<th><span style="font-size: medium;">Interface</span></th>
<th><span style="font-size: medium;">Rede</span></th>
</tr>
</thead>
<tbody>
<tr>
<td><span style="font-size: medium;">Ubuntu Server (ADDC)</span></td>
<td><span style="font-size: medium;">Ubuntu Server 22.04</span></td>
<td><span style="font-size: medium;">-192.168.10.2/24</span></td>
<td><span style="font-size: medium;">enp0s8</span></td>
<td><span style="font-size: medium;">Interna</span></td>
</tr>
<tr>
<td><span style="font-size: medium;">Cliente Windows</span></td>
<td><span style="font-size: medium;">Windows 10/11</span></td>
<td><span style="font-size: medium;">192.168.10.3/24</span></td>
<td><span style="font-size: medium;">NIC</span></td>
<td><span style="font-size: medium;">Interna</span></td>
</tr>
<tr>
<td><span style="font-size: medium;">Cliente Ubuntu</span></td>
<td><span style="font-size: medium;">Ubuntu Desktop</span></td>
<td><span style="font-size: medium;">192.168.10.4/24</span></td>
<td><span style="font-size: medium;">NIC</span></td>
<td><span style="font-size: medium;">Interna</span></td>
</tr>
</tbody>
</table>
<hr />
<h2><span style="font-size: medium;">🔧 2. Requisitos</span></h2>
<ul>
<li>
<p><span style="font-size: medium;">Máquinas <strong>zeradas/limpas</strong></span></p>
</li>
<li>
<p><span style="font-size: medium;">VirtualBox ou software semelhante configurado com:</span></p>
<ul>
<li>
<p><span style="font-size: medium;">Ubuntu Server com duas interfaces:</span></p>
<ul>
<li>
<p><span style="font-size: medium;"><strong>enp0s3 (NAT)</strong> para acesso à internet</span></p>
</li>
<li>
<p><span style="font-size: medium;"><strong>enp0s8 (Interna)</strong> para comunicação com os clientes</span></p>
</li>
</ul>
</li>
<li>
<p><span style="font-size: medium;">Clientes Windows e Ubuntu com interface <strong>somente interna</strong></span></p>
</li>
</ul>
</li>
<li>
<p><span style="font-size: medium;">Internet ativa na máquina host para atualizações</span></p>
</li>
</ul>
<hr />
<h2><span style="font-size: medium;">⚙️ 3. Configuração do Ubuntu Server (Rede com Netplan)</span></h2>
<h3><span style="font-size: medium;">➕ Verificar interfaces de rede</span></h3>
<pre><code class="language-bash"><span style="font-size: medium;">ip a
</span></code></pre>
<p><span style="font-size: medium;">Você deve visualizar <code inline="">enp0s3</code> e <code inline="">enp0s8</code>.</span></p>
<h3><span style="font-size: medium;">📝 Editar arquivo do Netplan</span></h3>
<pre><code class="language-bash"><span style="font-size: medium;">sudo nano /etc/netplan/01-netcfg.yaml
</span></code></pre>
<p><strong><span style="font-size: medium;">Conteúdo:</span></strong></p>
<pre><code class="language-yaml"><span style="font-size: medium;">network:
  version: 2
  ethernets:
    enp0s3:
      dhcp4: true
    enp0s8:
      addresses: [192.168.10.2/24]
      nameservers:
        addresses: [8.8.8.8]
</span></code></pre>
<blockquote>
<p><span style="font-size: medium;">Atenção à indentação! Use <strong>espaços</strong>, não <strong>tab</strong>.</span></p>
</blockquote>
<h3><span style="font-size: medium;">💾 Aplicar as configurações</span></h3>
<pre><code class="language-bash"><span style="font-size: medium;">sudo netplan apply
</span></code></pre>
<h3><span style="font-size: medium;">✅ Verificar IPs</span></h3>
<pre><code class="language-bash"><span style="font-size: medium;">ip a
</span></code></pre>
<p><span style="font-size: medium;">Confirme que:</span></p>
<ul>
<li>
<p><span style="font-size: medium;"><code inline="">enp0s3</code> pegou IP via DHCP</span></p>
</li>
<li>
<p><span style="font-size: medium;"><code inline="">enp0s8</code> tem o IP <code inline="">192.168.10.2</code></span></p>
</li>
</ul>
<hr />
<h2><span style="font-size: medium;">🔗 4. Configuração dos Clientes</span></h2>
<h3><span style="font-size: medium;">🪟 Cliente Windows</span></h3>
<ul>
<li>
<p><span style="font-size: medium;">Configure IP manual:</span></p>
<ul>
<li>
<p><span style="font-size: medium;">IP: <code inline="">192.168.10.3</code></span></p>
</li>
<li>
<p><span style="font-size: medium;">Máscara: <code inline="">255.255.255.0</code></span></p>
</li>
<li>
<p><span style="font-size: medium;">Gateway: (vazio)</span></p>
</li>
<li>
<p><span style="font-size: medium;">DNS: <code inline="">192.168.10.2</code></span></p>
</li>
</ul>
</li>
</ul>
<p><span style="font-size: medium;">Verifique IP:</span></p>
<pre><code class="language-cmd"><span style="font-size: medium;">ipconfig /all
</span></code></pre>
<hr />
<h3><span style="font-size: medium;">🐧 Cliente Ubuntu Desktop</span></h3>
<p><span style="font-size: medium;">Editar a conexão cabeada manualmente:</span></p>
<ul>
<li>
<p><span style="font-size: medium;">IP: <code inline="">192.168.10.4</code></span></p>
</li>
<li>
<p><span style="font-size: medium;">Máscara: <code inline="">255.255.255.0</code></span></p>
</li>
<li>
<p><span style="font-size: medium;">DNS: <code inline="">192.168.10.2</code></span></p>
</li>
</ul>
<p><span style="font-size: medium;">Verificar IP:</span></p>
<pre><code class="language-bash"><span style="font-size: medium;">ip a
</span></code></pre>
<hr />
<h2><span style="font-size: medium;">🔥 5. Configuração do Firewall no Cliente Windows</span></h2>
<h3><span style="font-size: medium;">Abrir o “Firewall do Windows com Segurança Avançada”:</span></h3>
<ol>
<li>
<p><span style="font-size: medium;">Acesse o menu iniciar e abra <strong>Firewall com Segurança Avançada</strong>.</span></p>
</li>
<li>
<p><span style="font-size: medium;">Vá em <strong>Regras de Entrada &gt; Nova Regra</strong>.</span></p>
</li>
<li>
<p><span style="font-size: medium;">Escolha <strong>Personalizada</strong></span></p>
</li>
<li>
<p><span style="font-size: medium;">Marque <strong>ICMPv4</strong> como protocolo.</span></p>
</li>
<li>
<p><span style="font-size: medium;">Permitir a conexão.</span></p>
</li>
<li>
<p><span style="font-size: medium;">Dê o nome à regra: <code inline="">Habilitar PING</code>.</span></p>
</li>
</ol>
<hr />
<h2><span style="font-size: medium;">📶 6. Testes de Conectividade</span></h2>
<h3><span style="font-size: medium;">🔁 Do Ubuntu Server:</span></h3>
<pre><code class="language-bash"><span style="font-size: medium;">ping 192.168.10.3   # Cliente Windows
ping 192.168.10.4   # Cliente Ubuntu
</span></code></pre>
<h3><span style="font-size: medium;">🔁 Do Cliente Ubuntu:</span></h3>
<pre><code class="language-bash"><span style="font-size: medium;">ping 192.168.10.2   # Ubuntu Server
</span></code></pre>
<h3><span style="font-size: medium;">🔁 Do Cliente Windows (cmd):</span></h3>
<pre><code class="language-cmd"><span style="font-size: medium;">ping 192.168.10.2
ping 192.168.10.4
</span></code></pre>
<p><span style="font-size: medium;">Se os testes forem bem-sucedidos, a <strong>rede interna está funcional</strong>.</span></p>
<hr />
<h2><span style="font-size: medium;">🧱 7. Instalação e Configuração do Samba4 como ADDC (Controlador de Domínio)</span></h2>
<h3><span style="font-size: medium;">📦 Instalar pacotes necessários</span></h3>
<pre><code class="language-bash"><span style="font-size: medium;">sudo apt update
sudo apt install samba krb5-config krb5-user winbind smbclient -y
</span></code></pre>
<p><span style="font-size: medium;">Durante a instalação, informe o <strong>domínio</strong> (ex: <code inline="">REDEINTERNA.LOCAL</code>).</span></p>
<h3><span style="font-size: medium;">🧹 Remover a configuração padrão do Samba</span></h3>
<pre><code class="language-bash"><span style="font-size: medium;">sudo mv /etc/samba/smb.conf /etc/samba/smb.conf.bkp
</span></code></pre>
<h3><span style="font-size: medium;">🔧 Provisionar o domínio</span></h3>
<pre><code class="language-bash"><span style="font-size: medium;">sudo samba-tool domain provision --use-rfc2307 --interactive
</span></code></pre>
<p><span style="font-size: medium;">Responda:</span></p>
<ul>
<li>
<p><span style="font-size: medium;">Realm: <code inline="">REDEINTERNA.LOCAL</code></span></p>
</li>
<li>
<p><span style="font-size: medium;">Domain: <code inline="">REDEINTERNA</code></span></p>
</li>
<li>
<p><span style="font-size: medium;">Server Role: <code inline="">dc</code></span></p>
</li>
<li>
<p><span style="font-size: medium;">DNS backend: <code inline="">SAMBA_INTERNAL</code></span></p>
</li>
<li>
<p><span style="font-size: medium;">Administrator password: (defina)</span></p>
</li>
</ul>
<h3><span style="font-size: medium;">🛠 Configurar o serviço</span></h3>
<p><span style="font-size: medium;">Edite o arquivo <code inline="">/etc/krb5.conf</code> com:</span></p>
<pre><code class="language-ini"><span style="font-size: medium;">[libdefaults]
    default_realm = REDEINTERNA.LOCAL
    dns_lookup_realm = false
    dns_lookup_kdc = true
</span></code></pre>
<h3><span style="font-size: medium;">✨ Ativar o Samba como daemon</span></h3>
<pre><code class="language-bash"><span style="font-size: medium;">sudo systemctl stop smbd nmbd winbind
sudo systemctl disable smbd nmbd winbind
sudo systemctl enable samba-ad-dc
sudo systemctl start samba-ad-dc
</span></code></pre>
<hr />
<h2><span style="font-size: medium;">🧪 8. Testar autenticação no domínio</span></h2>
<p><span style="font-size: medium;">Testar o Kerberos:</span></p>
<pre><code class="language-bash"><span style="font-size: medium;">kinit administrator
</span></code></pre>
<p><span style="font-size: medium;">Verifique com:</span></p>
<pre><code class="language-bash"><span style="font-size: medium;">klist
</span></code></pre>
<hr />
<h2><span style="font-size: medium;">🧰 9. (Opcional) Ingressar Cliente Windows no Domínio</span></h2>
<ol>
<li>
<p><span style="font-size: medium;">Abra <strong>Propriedades do sistema</strong></span></p>
</li>
<li>
<p><span style="font-size: medium;">Clique em <strong>Alterar configurações &gt; Nome do computador &gt; Alterar</strong></span></p>
</li>
<li>
<p><span style="font-size: medium;">Em domínio, insira: <code inline="">REDEINTERNA.LOCAL</code></span></p>
</li>
<li>
<p><span style="font-size: medium;">Insira as credenciais do <code inline="">administrator</code></span></p>
</li>
<li>
<p><span style="font-size: medium;">Reinicie o Windows</span></p>
</li>
</ol>
<hr />
<h2><span style="font-size: medium;">✅ Conclusão</span></h2>
<p><span style="font-size: medium;">Este ambiente inclui:</span></p>
<ul>
<li>
<p><span style="font-size: medium;">Configuração de rede NAT + Interna com Netplan</span></p>
</li>
<li>
<p><span style="font-size: medium;">Ubuntu Server como controlador de domínio (ADDC)</span></p>
</li>
<li>
<p><span style="font-size: medium;">Clientes configurados manualmente com IPs fixos</span></p>
</li>
<li>
<p><span style="font-size: medium;">Firewall no Windows ajustado para ICMPv4</span></p>
</li>
<li>
<p><span style="font-size: medium;">Comunicação plena via <strong>ping</strong></span></p>
</li>
<li>
<p><span style="font-size: medium;">Pronto para uso com <strong>domínio Samba4</strong></span></p></li></ul>

   <br>
      <p><b>Ajude-nos a divulgar compartilhando com os seus amigos!</b></p><br>
      <div class="share-button">
        <a class="whatsapp" href="https://api.whatsapp.com/send?text=Confira%20esta%20página:%20" target="_blank">WhatsApp</a>
        <a class="facebook" href="https://www.facebook.com/sharer/sharer.php?u=" target="_blank">Facebook</a>
        <a class="twitter" href="https://twitter.com/intent/tweet?url=" target="_blank">Twitter</a>
     </div>

    <script>
        document.addEventListener("DOMContentLoaded", function() {
            const url = encodeURIComponent(window.location.href);
            document.querySelector(".whatsapp").href += url;
            document.querySelector(".facebook").href += url;
            document.querySelector(".twitter").href += url;
        });
    </script><br><br>  
            
            <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-4610790883957362"
     crossorigin="anonymous"></script>
<!-- ivaldofs_starter-pro-main-after-ad_AdSense2_1x1_as -->
<ins class="adsbygoogle"
     style="display:block"
     data-ad-client="ca-pub-4610790883957362"
     data-ad-slot="5122445068"
     data-ad-format="auto"
     data-full-width-responsive="true"></ins>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script>
            
           </div> 
          <b><center>
<a href="https://ivaldofs.com.br/">Inicio</a> |
<a href="https://ivaldofs.com.br/contato.html">Contato</a> |
<a href="https://ivaldofs.com.br/sobre.html">Sobre</a> |
<a href="https://ivaldofs.com.br/politica-de-privacidade.html">Politica de Privacidade</a> |
<a href="https://ivaldofs.com.br/termos-de-uso.html">Termos de Uso</a> |
<a href="/biblia/outros-idiomas.html">Outros Idiomas</a> |
<a href="/biblia/estudos.html">Estudos</a> 
</center><b>
   
  <b><center>
  <footer>
        <p>&copy; Ivaldo Fernandes - Todos os direitos reservados.</p>
  </footer>
</center><b>

<script src="/app/script.js"></script>
</body>
</html>
